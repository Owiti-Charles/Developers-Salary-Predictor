{% load widget_tweaks %}
{% block content %}
<div class="card mb-4" style="border-radius: 20px">
  <div class="card-header p-3 text-center" style="background: linear-gradient(90deg, #5546e6 0%, #7C6CF6 100%); border-top-left-radius: 20px; border-top-right-radius: 20px;">
  <!-- Brain Icon SVG -->
  <svg width="48" height="48" fill="none" viewBox="0 0 64 64" class="mb-2 align-middle">
    <circle cx="32" cy="32" r="32" fill="#fff" opacity="0.15"/>
    <path d="M32 18c-7 0-12 5-12 12 0 7 5 12 12 12s12-5 12-12c0-7-5-12-12-12zm0 22c-5.5 0-10-4.5-10-10s4.5-10 10-10 10 4.5 10 10-4.5 10-10 10z" fill="#fff"/>
    <circle cx="32" cy="32" r="4" fill="#fff"/>
  </svg>
  <span class="display-5 fw-bold align-middle" style="color:#fff; border-radius:8px; padding:0 12px;">Developer Salary Predictor</span>
  <div class="mt-3 fs-4" style="color:#fff;">
    Tell us about your developer profile to get an estimated salary prediction
  </div>
</div>
  <div class="card-body">
    <form method="post">
      {% csrf_token %}
      <div class="row g-3">
        <!-- Countries -->
<div class="col-12">
  <label for="{{ form.countries.id_for_label }}" class="form-label">Country</label>
  {{ form.countries|add_class:"form-select" }}
  {% if form.countries.errors %}
    <div class="text-danger small">{{ form.countries.errors }}</div>
  {% endif %}
</div>

        <!-- Developer Type -->
        <div class="col-md-6">
          <label for="{{ form.dev_type.id_for_label }}" class="form-label">Developer Type</label>
          {{ form.dev_type|add_class:"form-select" }}
          {% if form.dev_type.errors %}
            <div class="text-danger small">{{ form.dev_type.errors }}</div>
          {% endif %}
        </div>
        <!-- Education Level -->
<div class="col-md-6">
  <label for="{{ form.ed_level.id_for_label }}" class="form-label">Education Level</label>
  {{ form.ed_level|add_class:"form-select" }}
  {% if form.ed_level.errors %}
    <div class="text-danger small">{{ form.ed_level.errors }}</div>
  {% endif %}
</div>
        <div class="col-md-6">
  <label for="{{ form.years_code_pro.id_for_label }}" class="form-label">Years of Professional Coding</label>
  <input type="range" min="0" max="50" step="0.5" class="form-range" id="{{ form.years_code_pro.id_for_label }}" name="{{ form.years_code_pro.html_name }}" value="{{ form.years_code_pro.value|default_if_none:0 }}">
  <span class="fw-bold ms-2" id="years_code_pro_value">{{ form.years_code_pro.value|default_if_none:0 }}</span>
  {% if form.years_code_pro.errors %}
    <div class="text-danger small">{{ form.years_code_pro.errors }}</div>
  {% endif %}
</div>
<!-- Years of Coding (any context) -->
<div class="col-md-6">
  <label for="{{ form.years_of_coding.id_for_label }}" class="form-label">Total Years Coding (any context)</label>
  <input type="range" min="0" max="50" step="0.5" class="form-range" id="{{ form.years_of_coding.id_for_label }}" name="{{ form.years_of_coding.html_name }}" value="{{ form.years_of_coding.value|default_if_none:0 }}">
  <span class="fw-bold ms-2" id="years_of_coding_value">{{ form.years_of_coding.value|default_if_none:0 }}</span>
  {% if form.years_of_coding.errors %}
    <div class="text-danger small">{{ form.years_of_coding.errors }}</div>
  {% endif %}
</div>
        <!-- Programming Languages -->
        <div class="col-12">
        <label class="form-label mb-2">Programming Languages <span class="small text-muted">(select all that apply)</span></label>
  <div class="d-flex flex-wrap gap-1">
    {% for value, label in form.programming_languages.field.choices %}
      {% if value %}
        <div class="form-check m-1">
          <input class="btn-check" type="checkbox" name="{{ form.programming_languages.html_name }}" id="lang_{{ forloop.counter }}" value="{{ value }}"
            {% if value in form.programming_languages.value %}checked{% endif %}>
          <label class="btn btn-outline-primary fw-bold" for="lang_{{ forloop.counter }}">{{ label }}</label>
        </div>
      {% endif %}
    {% endfor %}
  </div>
  {% if form.programming_languages.errors %}
    <div class="text-danger small mt-2">{{ form.programming_languages.errors }}</div>
  {% endif %}
</div>
      </div>
      <div class="mt-4">
        <button type="submit" class="btn btn-primary w-100">Predict Salary</button>
      </div>
    </form>
  </div>
</div>
<script>
  const yearsCodePro = document.getElementById("{{ form.years_code_pro.id_for_label }}");
  const yearsCodeProValue = document.getElementById("years_code_pro_value");
  if (yearsCodePro && yearsCodeProValue) {
    yearsCodePro.addEventListener("input", function() {
      yearsCodeProValue.textContent = yearsCodePro.value;
    });
  }
  const yearsOfCoding = document.getElementById("{{ form.years_of_coding.id_for_label }}");
  const yearsOfCodingValue = document.getElementById("years_of_coding_value");
  if (yearsOfCoding && yearsOfCodingValue) {
    yearsOfCoding.addEventListener("input", function() {
      yearsOfCodingValue.textContent = yearsOfCoding.value;
    });
  }
</script>
{% endblock content %}
